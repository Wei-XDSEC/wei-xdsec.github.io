---
layout: post
title: "git学习笔记"
date: 2018-11-21 18:57:37
description: "git学习笔记"
tag :
    - "笔记"
---
> 笔记类型，大部分非原创，由网上搜集整理总结得。   

> 目前笔记所记录到的内容是上传博客所用到的Git用法
## 官方文档
[Documentation](https://git-scm.com/doc)
## 中文教程
建议看[廖雪峰的关于git的讲解](https://www.liaoxuefeng.com/wiki/0013739516305929606dd18361248578c67b8067c8c017b000)，适合新手。

# 常用命令
> 以下的英文内容引用自git的[官方文档](https://git-scm.com/doc)  
命令介绍的顺序是[廖雪峰的关于git的讲解](https://www.liaoxuefeng.com/wiki/0013739516305929606dd18361248578c67b8067c8c017b000)的顺序
## 本地操作
### `git init`
> Create an empty Git repository or reinitialize an existing one

### `git add`
> Add file contents to the index    

将文件添加到index中。    
在对工作树进行任何更改之后，在运行commit命令之前，必须使用该命令将任何新的或已修改的文件添加到暂存区中。

### `git commit`
> Record changes to the repository  

### `git status`
> Show the working tree status

> Displays paths that have differences between the index file and the current HEAD commit, paths that have differences between the working tree and the index file, and paths in the working tree that are not tracked by Git (and are not ignored by gitignore). The first are what you would commit by running git commit; the second and third are what you could commit by running git add before running git commit.

### `git diff`
> Show changes between commits, commit and working tree, etc

### `git log`
> Show commit logs

### `git reset`
> Reset current HEAD to the specified state
- 转移到指定版本：
    ```
    git reset --hard <commit ID>
    #<commit ID>指版本号，可以通过以下命令查看：
    #git reflog 
    ```
- 回退到上一个版本：
    ```
    git reset --hard HEAD^
    ```
- 将暂存区中的某文件的改动移出暂存区（工作区的改动仍然存在）
   ```
   git reset HEAD <file>
   ```
### `git reflog`
> Manage reflog information

### `git checkout`
> Switch branches or restore working tree files

- 撤销工作区内对某文件的改动
   ```
   git checkout -- <file>
   ```
  注意，git追踪的是改动，你已经移入暂存区的该文件改动是不会被撤销的，这个命令撤销的是不在暂存区的某文件的改动。如果想撤销该文件在暂存区的改动可以这样。
  ```
  git reset HEAD <file>
  #将这个文件的改动移出暂存区
  git checkout -- <file>
  #撤销工作区中对这个文件的改动
  ```
## 远程协作
### `ssh-keygen`
和github远程仓库通讯是SSH加密的，所以需要在github上保存你的公钥。这部分内容可以参照[廖雪峰的讲解](https://www.liaoxuefeng.com/wiki/0013739516305929606dd18361248578c67b8067c8c017b000/001374385852170d9c7adf13c30429b9660d0eb689dd43a000)。
你的SSH Key公钥不在某个github账号中就不能修改该账户中的库。

### `git clone`
> Clone a repository into a new directory
- 将库中的内容克隆到本地
  ```
  git clone <source> <destnation>
  ```
  `<source>`的内容是github中绿色的`Clone or download`按钮中`Clone with SSH`中的内容。
  `<destnation>`是clone到的路径

### `git remote`
>  Manage set of tracked repositories

- 和远程仓库建立联系
    ```
    git remote add origin <source>
    ```
    `<source>`的内容是github中绿色的`Clone or download`按钮中`Clone with SSH`中的内容。
    origin 是默认的远程仓库的名字，这个名字就会和你所选择的库联系起来

### `git push`
> Update remote refs along with associated objects
- 将master分支推送到远程库
  ```
  git push -u origin master
  ```

# 概念
## `HEAD`
Git中版本树里指向当前版本的记录。
- 表示上一个版本
    ```
    HEAD^
    ```
- 表示上上一个版本
    ```
    HEAD^^
    ```

## `工作区`
你工作的目录（这个目录下会有.git的隐藏文件夹）

## `版本库`
.git文件夹，是Git的版本库。不属于工作区    
版本库里其中重要的两项是称为`stage`（或者`index`）的暂存区和分支。
工作区里的改动（修改，增加，删除）需要通过`git add`命令添加到`stage`（删除需要`git rm`命令将改动添加到暂存区）, 当做出多个改动并都将之添加到暂存区后。可以通过`git commit`命令将改动提交到分支。    
注意git追踪管理的是改动而不是文件。

以下是`git status`命令查看时几种常见情况（非一对一）：
- 处于暂存区的改动但未`git commit`提交到分支：
  ```
  Changes to be committed:
        XXXXXXXX
  ```
  可以使用`git commit`命令将改动提交到分支
- 某文件第一次被添加到工作区内
  ```
  Untracked files:
        XXXXXXXX
  ```
  可以用`git add`命令使git开始追踪这个文件，并将这项改动移动到暂存区
  ```
  Changes to be committed:
        new file:   XXXXXXXXXX
  ```
- git已知的文件被改动，但并未将这项改动移动到暂存区：
  ```
  Changes not staged for commit:
        XXXXXXXX
  ```
  需要使用`git add`命令将改动添加到暂存区（如果改动是删除的话要用`git rm`）。
  注意git追踪的是改动，如果你第一次改动后将改动移动到暂存区，之后再次对相同文件进行改动的话，会将你第二次改动和第一次是独立的，第二次不会被移动到暂存区，属于`Changes not staged for commit：`这项状态。
## `暂存区`
参照版本库中的解释。

## `版本`
版本的界定是`git commit`命令，每次使用这个命令后都会产生新的版本。

## `远程库`
Git并不是专门为github的远程仓库而设计的，你也可以自己搭建一个服务器，只不过github提供了免费Git仓库托管服务，但是如果你想将库作为私人的，别人不可读，不可改的话就需要收费了。（不过大多数用户使用github都是为了开源的性质来的）
本地仓库和github仓库的通讯是SSH加密通讯，需要用SSH Key识别用户。

# 遇到的问题
## windows下创建文件，提交时遇到以下问题：
```
warning: LF will be replaced by CRLF in README.md.
The file will have its original line endings in your working directory
```
这份[博文](https://www.cnblogs.com/zjoch/p/5400251.html)
解决方案为：
```
git config --global core.autocrlf false
```
大体意思上是因为类UNIX上的文本文件都以LF为换行符，而Windows是上的文件以CRLF为换行符，而git为了保持类UNIX风格会将LF替换为CRLF，并且在你下载下来之后又会替换回原本的换行符CRLF。所以我们只要关掉自动替换功能就可以了。

## git commit 时遇到 `error: pathspec 'xxxxxxxx' did not match any file(s) known to git`
git commit 时忘了加-m了
而不加-m的话是以下情况
```
by listing files as arguments to the commit command (without --interactive or --patch switch), in which case the commit will ignore changes staged in the index, and instead record the current content of the listed files (which must already be known to Git);
```
